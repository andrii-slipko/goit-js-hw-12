{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46068740-edf0cd65fcad07ce38acca64d';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page = 1) => {\n    const response = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page,\n            per_page: 15,\n        },\n    });\n    return response.data;\n};","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const renderImages = (images) => {\n    const resultsDiv = document.getElementById('results');\n    resultsDiv.insertAdjacentHTML('beforeend', images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"list-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"info\">\n                <span>Likes: ${likes}</span>\n                <span>Views: ${views}</span>\n                <span>Comments: ${comments}</span>\n                <span>Downloads: ${downloads}</span>\n            </div>\n        </li>\n    `).join(''));\n};\n\nexport const showLoading = () => {\n    document.getElementById('loading').style.display = 'block';\n};\n\nexport const hideLoading = () => {\n    document.getElementById('loading').style.display = 'none';\n};\n\nexport const showError = (message) => {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n    });\n};\n\nexport const showWarning = (message) => {\n    iziToast.warning({\n        title: 'Attention',\n        message: message,\n    });\n};\n\nexport const clearResults = () => {\n    document.getElementById('results').innerHTML = '';\n};","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showLoading, hideLoading, showError, showWarning, clearResults } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst searchForm = document.querySelector('#searchForm');\nconst loadMoreButton = document.createElement('button');\nloadMoreButton.textContent = 'Load more';\nloadMoreButton.style.display = 'none';\nloadMoreButton.classList.add('load-more-button');\ndocument.body.append(loadMoreButton);\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const queryInput = document.getElementById('searchQuery');\n    const query = queryInput.value.trim();\n\n    if (query === \"\") {\n        showWarning('Fill this field!');\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n    clearResults();\n    showLoading();\n\n    try {\n        const data = await fetchImages(currentQuery, currentPage);\n        \n        if (data.hits.length === 0) {\n            showError('Sorry, there are no images matching your search query. Please try again!');\n            loadMoreButton.style.display = 'none';\n        } else {\n            renderImages(data.hits);\n            const lightbox = new SimpleLightbox('.gallery a');\n            lightbox.refresh();\n            loadMoreButton.style.display = 'block';\n\n            if (data.totalHits <= 15) {\n                loadMoreButton.style.display = 'none';\n                showError(\"We're sorry, but you've reached the end of search results.\");\n            }\n        }\n    } catch (error) {\n        showError('Щось пішло не так. Спробуйте ще раз.');\n        console.error('Error fetching data:', error);\n    } finally {\n        hideLoading();\n        queryInput.value = '';\n    }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    showLoading();\n\n    try {\n        const data = await fetchImages(currentQuery, currentPage);\n        if (data.hits.length === 0) {\n            loadMoreButton.style.display = 'none';\n            showError(\"We're sorry, but you've reached the end of search results.\");\n        } else {\n            renderImages(data.hits);\n            const lightbox = new SimpleLightbox('.gallery a');\n            lightbox.refresh();\n\n            if (data.totalHits <= currentPage * 15) {\n                loadMoreButton.style.display = 'none';\n                showError(\"We're sorry, but you've reached the end of search results.\");\n            }\n        }\n    } catch (error) {\n        showError('Щось пішло не так. Спробуйте ще раз.');\n        console.error('Error fetching data:', error);\n    } finally {\n        hideLoading();\n    }\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","renderImages","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoading","hideLoading","showError","message","iziToast","showWarning","clearResults","currentPage","currentQuery","searchForm","loadMoreButton","event","queryInput","data","SimpleLightbox","error"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAc,MAAOC,EAAOC,EAAO,KAC3B,MAAMC,EAAM,IAAIJ,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACb,CACT,CAAK,GACe,KCdPE,EAAgBC,GAAW,CACjB,SAAS,eAAe,SAAS,EACzC,mBAAmB,YAAaA,EAAO,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,uBAEjHL,CAAa;AAAA,4BACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,+BAGvBC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA;AAAA,KAGvC,EAAE,KAAK,EAAE,CAAC,CACf,EAEaC,EAAc,IAAM,CAC7B,SAAS,eAAe,SAAS,EAAE,MAAM,QAAU,OACvD,EAEaC,EAAc,IAAM,CAC7B,SAAS,eAAe,SAAS,EAAE,MAAM,QAAU,MACvD,EAEaC,EAAaC,GAAY,CAClCC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,CACjB,CAAK,CACL,EAEaE,EAAeF,GAAY,CACpCC,EAAS,QAAQ,CACb,MAAO,YACP,QAASD,CACjB,CAAK,CACL,EAEaG,EAAe,IAAM,CAC9B,SAAS,eAAe,SAAS,EAAE,UAAY,EACnD,ECxCA,IAAIC,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAiB,SAAS,cAAc,QAAQ,EACtDA,EAAe,YAAc,YAC7BA,EAAe,MAAM,QAAU,OAC/BA,EAAe,UAAU,IAAI,kBAAkB,EAC/C,SAAS,KAAK,OAAOA,CAAc,EAEnCD,EAAW,iBAAiB,SAAU,MAAOE,GAAU,CACnDA,EAAM,eAAc,EAEpB,MAAMC,EAAa,SAAS,eAAe,aAAa,EAClDxB,EAAQwB,EAAW,MAAM,KAAI,EAEnC,GAAIxB,IAAU,GAAI,CACdiB,EAAY,kBAAkB,EAC9B,MACH,CAEDG,EAAepB,EACfmB,EAAc,EACdD,IACAN,IAEA,GAAI,CACA,MAAMa,EAAO,MAAM1B,EAAYqB,EAAcD,CAAW,EAEpDM,EAAK,KAAK,SAAW,GACrBX,EAAU,0EAA0E,EACpFQ,EAAe,MAAM,QAAU,SAE/BnB,EAAasB,EAAK,IAAI,EACL,IAAIC,EAAe,YAAY,EACvC,QAAO,EAChBJ,EAAe,MAAM,QAAU,QAE3BG,EAAK,WAAa,KAClBH,EAAe,MAAM,QAAU,OAC/BR,EAAU,4DAA4D,GAGjF,OAAQa,EAAO,CACZb,EAAU,sCAAsC,EAChD,QAAQ,MAAM,uBAAwBa,CAAK,CACnD,QAAc,CACNd,IACAW,EAAW,MAAQ,EACtB,CACL,CAAC,EAEDF,EAAe,iBAAiB,QAAS,SAAY,CACjDH,GAAe,EACfP,IAEA,GAAI,CACA,MAAMa,EAAO,MAAM1B,EAAYqB,EAAcD,CAAW,EACpDM,EAAK,KAAK,SAAW,GACrBH,EAAe,MAAM,QAAU,OAC/BR,EAAU,4DAA4D,IAEtEX,EAAasB,EAAK,IAAI,EACL,IAAIC,EAAe,YAAY,EACvC,QAAO,EAEZD,EAAK,WAAaN,EAAc,KAChCG,EAAe,MAAM,QAAU,OAC/BR,EAAU,4DAA4D,GAGjF,OAAQa,EAAO,CACZb,EAAU,sCAAsC,EAChD,QAAQ,MAAM,uBAAwBa,CAAK,CACnD,QAAc,CACNd,GACH,CACL,CAAC"}